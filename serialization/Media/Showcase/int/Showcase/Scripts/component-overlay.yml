---
ID: "9cb35991-aaa6-40f1-81a7-a099c09f0550"
Parent: "f96e1925-a3cc-4752-b969-70feb5b5d696"
Template: "962b53c4-f93b-4df9-9821-415c867b8903"
Path: "/sitecore/media library/Project/Showcase/int/Showcase/Scripts/component-overlay"
DB: master
SharedFields:
- ID: "06d5295c-ed2f-4a54-9bf2-26228d113318"
  Hint: __Icon
  Value: "-/media/9CB35991AAA640F181A7A099C09F0550.ashx?h=16&thn=1&w=16"
- ID: "40e50ed9-ba07-4702-992e-a912738d32dc"
  Hint: Blob
  BlobID: "e5b2fcd8-4a78-4082-842a-c03a39bcece6"
  Value: WEEuY29tcG9uZW50Lm92ZXJsYXkgPSBmdW5jdGlvbiAoJCkgew0KDQogICAgdmFyIGFwaSA9IHt9LA0KICAgICAgICBocmVmID0gd2luZG93LmxvY2F0aW9uLmhyZWYsDQogICAgICAgIGhvc3QgPSBsb2NhdGlvbi5ob3N0LA0KICAgICAgICBsYWJlbCwNCiAgICAgICAgb3ZlcmxheVBsYWNlaG9sZGVyID0gZmFsc2UsDQogICAgICAgIG1hcmdpblRvcCA9IDEwMDsNCg0KICAgIGZ1bmN0aW9uIGlzUHJldmlld01vZGUoKQ0KICAgIHsNCiAgICAgICAgaWYgKGhyZWYuaW5kZXhPZigic2NfbW9kZT1wcmV2aWV3IikgPiAtMSkNCiAgICAgICAgICAgIHJldHVybiB0cnVlOw0KDQogICAgICAgIHZhciAkaGRQYWdlTW9kZSA9ICQoJyNoZFBhZ2VNb2RlJyk7DQoNCiAgICAgICAgcmV0dXJuICRoZFBhZ2VNb2RlLmxlbmd0aCA+IDAgJiYgJGhkUGFnZU1vZGUuYXR0cigndmFsdWUnKSA9PSAncHJldmlldyc7DQogICAgfQ0KDQogICAgZnVuY3Rpb24gaXNFZGl0TW9kZSgpIHsNCiAgICAgICAgaWYgKGhyZWYuaW5kZXhPZigic2NfbW9kZT1lZGl0IikgPiAtMSkNCiAgICAgICAgICAgIHJldHVybiB0cnVlOw0KDQogICAgICAgIHZhciAkaGRQYWdlTW9kZSA9ICQoJyNoZFBhZ2VNb2RlJyk7DQoNCiAgICAgICAgcmV0dXJuICRoZFBhZ2VNb2RlLmxlbmd0aCA+IDAgJiYgJGhkUGFnZU1vZGUuYXR0cigndmFsdWUnKSA9PSAnZWRpdCc7DQogICAgfQ0KDQogICAgZnVuY3Rpb24gaXNPdmVybGF5UGFnZSgpIHsNCiAgICAgICAgcmV0dXJuICQoJyN3cmFwcGVyJykuaGFzQ2xhc3MoJ292ZXJsYXktcGFnZScpOw0KICAgIH0NCg0KICAgIGZ1bmN0aW9uIHJlc2l6ZU92ZXJsYXkoaW5uZXIsIGNvbnRlbnQsIG9wdGlvbnMpIHsNCiAgICAgICAgdmFyIHVuaXQgPSAicHgiOw0KICAgICAgICB2YXIgY3NzID0gew0KICAgICAgICAgICAgIndpZHRoIiA6ICIiLA0KICAgICAgICAgICAgImhlaWdodCIgOiAiIg0KICAgICAgICB9Ow0KICAgICAgICB2YXIgd2ggPSAkKHdpbmRvdykuaGVpZ2h0KCk7DQoNCiAgICAgICAgaWYgKG9wdGlvbnMucGVyY2VudCkgew0KICAgICAgICAgICAgdW5pdCA9ICIlIjsNCiAgICAgICAgICAgIGlubmVyLmFkZENsYXNzKCJvdmVybGF5LXBlcmNlbnQiKTsNCiAgICAgICAgICAgIGlmKGlzRWRpdE1vZGUoKSl7DQogICAgICAgICAgICAgICAgaW5uZXIuYWRkQ2xhc3MoImVkaXQiKQ0KICAgICAgICAgICAgfQ0KICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgaW5uZXIucmVtb3ZlQ2xhc3MoIm92ZXJsYXktcGVyY2VudCIpOw0KICAgICAgICAgICAgaWYoaXNFZGl0TW9kZSgpKXsNCiAgICAgICAgICAgICAgICBpbm5lci5yZW1vdmVDbGFzcygiZWRpdCIpDQogICAgICAgICAgICB9DQogICAgICAgIH0NCg0KICAgICAgICBpZiAob3B0aW9ucy53aWR0aCkgew0KICAgICAgICAgICAgY3NzWyJ3aWR0aCJdID0gb3B0aW9ucy53aWR0aCArIHVuaXQ7DQogICAgICAgIH0NCiAgICAgICAgaWYgKG9wdGlvbnMuaGVpZ2h0KSB7DQogICAgICAgICAgICBjc3NbImhlaWdodCJdID0gb3B0aW9ucy5oZWlnaHQgKyB1bml0Ow0KICAgICAgICB9DQoNCiAgICAgICAgY3NzWyJtYXgtaGVpZ2h0Il0gPSAod2ggLSBtYXJnaW5Ub3AgLSAwLjEgKiB3aCkgKyAicHgiOw0KICAgICAgICANCiAgICAgICAgY29udGVudC5jc3MoY3NzKTsNCiAgICB9DQoNCiAgICBmdW5jdGlvbiBnZXRVcmxWYXJpYWJsZXModXJsKSB7DQogICAgICAgIHZhciBxID0gdXJsLnNwbGl0KCc/JylbMV0sDQogICAgICAgICAgICB2YXJzID0gW10sDQogICAgICAgICAgICBoYXNoOw0KDQogICAgICAgIGlmIChxICE9IHVuZGVmaW5lZCkgew0KICAgICAgICAgICAgcSA9IHEuc3BsaXQoJyYnKTsNCiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcS5sZW5ndGg7IGkrKykgew0KICAgICAgICAgICAgICAgIGhhc2ggPSBxW2ldLnNwbGl0KCc9Jyk7DQogICAgICAgICAgICAgICAgdmFycy5wdXNoKGhhc2hbMV0pOw0KICAgICAgICAgICAgICAgIHZhcnNbaGFzaFswXV0gPSBoYXNoWzFdOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQoNCiAgICAgICAgcmV0dXJuIHZhcnM7DQogICAgfQ0KDQogICAgZnVuY3Rpb24gZ2V0U2l6ZSh2YXJzKXsNCiAgICAgICAgdmFyIG9iaiA9IHt9Ow0KDQogICAgICAgIGlmKHZhcnNbIndpZHRoIl0gIT09IG51bGwpIHsNCiAgICAgICAgICAgIG9ialsid2lkdGgiXSA9IHZhcnNbIndpZHRoIl07DQogICAgICAgIH0NCg0KICAgICAgICBpZih2YXJzWyJoZWlnaHQiXSAhPT0gbnVsbCkgew0KICAgICAgICAgICAgb2JqWyJoZWlnaHQiXSA9IHZhcnNbImhlaWdodCJdOw0KICAgICAgICB9DQoNCiAgICAgICAgcmV0dXJuIG9iajsNCiAgICB9DQoNCiAgICBmdW5jdGlvbiBjaGVja0ludGVybmFsKHVybCl7DQogICAgICAgIGlmKHVybC5pbmRleE9mKGhvc3QpID4gLTEpew0KICAgICAgICAgICAgcmV0dXJuIHRydWU7DQogICAgICAgIH0NCiAgICAgICAgcmV0dXJuIGZhbHNlOw0KICAgIH0NCg0KICAgIGZ1bmN0aW9uICBjaGVja0ltYWdlKHVybCl7DQogICAgICAgIHZhciBleHQgPSB1cmwuc3BsaXQoIj8iKVswXS5zcGxpdCgnLicpLnBvcCgpOw0KICAgICAgICBpZiAoJC5pbkFycmF5KGV4dCwgWydnaWYnLCAncG5nJywgJ2pwZycsICdqcGVnJ10pID4gLTEpIHsNCiAgICAgICAgICAgIHJldHVybiB0cnVlOw0KICAgICAgICB9DQoNCiAgICAgICAgcmV0dXJuIGZhbHNlOw0KICAgIH0NCg0KDQogICAgZnVuY3Rpb24gbG9hZE92ZXJsYXkodXJsLCBvdmVybGF5KSB7DQogICAgICAgIHZhciBob3N0ID0gbG9jYXRpb24uaG9zdCwNCiAgICAgICAgICAgIGNvbnRlbnQgPSBvdmVybGF5LmZpbmQoIi5vdmVybGF5LWlubmVyIiksDQogICAgICAgICAgICBvdmVybGF5Q29udGVudCA9IG92ZXJsYXkuZmluZCgiLmNvbXBvbmVudC1jb250ZW50IiksDQogICAgICAgICAgICB2YXJzID0gZ2V0VXJsVmFyaWFibGVzKHVybCksDQogICAgICAgICAgICBpbnRlcm5hbExpbmsgPSBjaGVja0ludGVybmFsKHVybCksDQogICAgICAgICAgICBvdmVybGF5U2l6ZSA9IGdldFNpemUodmFycyksDQogICAgICAgICAgICBzdWZmaXg7DQoNCiAgICAgICAgY29udGVudC5yZW1vdmVBdHRyKCdzdHlsZScpOw0KDQogICAgICAgIGlmKGludGVybmFsTGluayl7DQogICAgICAgICAgICBpZiAoY2hlY2tJbWFnZSh1cmwpKSB7DQogICAgICAgICAgICAgICAgY29udGVudC5lbXB0eSgpLmFwcGVuZCgkKCI8aW1nPiIsIHsgc3JjOiB1cmwgfSkpOw0KICAgICAgICAgICAgICAgIGNvbnRlbnQuY3NzKG92ZXJsYXlTaXplKTsNCiAgICAgICAgICAgICAgICBzaG93T3ZlcmxheShvdmVybGF5KTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGVsc2UgaWYgKHVybC5pbmRleE9mKCJvdmVybGF5dHlwZT1pZnJhbWUiKSA+IC0xKSB7DQogICAgICAgICAgICAgICAgY29udGVudC5lbXB0eSgpLmFwcGVuZCgkKCI8aWZyYW1lPiIsIHsgc3JjOiB1cmwsIHN0eWxlOiAid2lkdGg6IDEwMCU7IGhlaWdodDogMTAwJSIgfSkpOw0KICAgICAgICAgICAgICAgIGNvbnRlbnQuY3NzKG92ZXJsYXlTaXplKTsNCiAgICAgICAgICAgICAgICBzaG93T3ZlcmxheShvdmVybGF5KTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGVsc2Ugew0KICAgICAgICAgICAgICAgIHN1ZmZpeCA9ICJzY19kZXZpY2U9b3ZlcmxheSI7DQogICAgICAgICAgICAgICAgdXJsICs9ICh1cmwuaW5kZXhPZigiPyIpID09IC0xID8gIj8iIDogIiYiKSArIHN1ZmZpeDsNCg0KICAgICAgICAgICAgICAgIGlmIChpc1ByZXZpZXdNb2RlKCkpIHsNCiAgICAgICAgICAgICAgICAgICAgc3VmZml4ID0gImNmX292ZXJsYXk9MSI7DQogICAgICAgICAgICAgICAgICAgIHVybCA9IHVybC5yZXBsYWNlKCJzaXRlY29yZS9zaGVsbC8iKTsNCiAgICAgICAgICAgICAgICAgICAgdXJsICs9ICh1cmwuaW5kZXhPZigiPyIpID09IC0xID8gIj8iIDogIiYiKSArIHN1ZmZpeA0KICAgICAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgICAgICQuZ2V0KHVybCwgZnVuY3Rpb24oZGF0YSkgew0KICAgICAgICAgICAgICAgICAgICB2YXIgb3ZlcmxheURhdGEgPSAkKGRhdGEpLmJlZm9yZSgpLmZpcnN0KCk7DQoNCiAgICAgICAgICAgICAgICAgICAgcmVzaXplT3ZlcmxheShjb250ZW50LCBvdmVybGF5Q29udGVudCwgew0KICAgICAgICAgICAgICAgICAgICAgICAgd2lkdGg6IG92ZXJsYXlEYXRhLmF0dHIoImRhdGEtd2lkdGgiKSwNCiAgICAgICAgICAgICAgICAgICAgICAgIGhlaWdodDogb3ZlcmxheURhdGEuZGF0YSgiaGVpZ2h0IiksDQogICAgICAgICAgICAgICAgICAgICAgICBwZXJjZW50OiBvdmVybGF5RGF0YS5kYXRhKCJwZXJjZW50IikNCiAgICAgICAgICAgICAgICAgICAgfSk7DQoNCiAgICAgICAgICAgICAgICAgICAgY29udGVudC5lbXB0eSgpLmFwcGVuZChkYXRhKTsNCiAgICAgICAgICAgICAgICAgICAgWEEuaW5pdCgpOw0KICAgICAgICAgICAgICAgICAgICBzaG93T3ZlcmxheShvdmVybGF5KTsNCiAgICAgICAgICAgICAgICB9KTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgICAgICBlbHNlIHsNCiAgICAgICAgICAgIGlmKGNoZWNrSW1hZ2UodXJsKSkgew0KICAgICAgICAgICAgICAgIGNvbnRlbnQuZW1wdHkoKS5hcHBlbmQoJCgiPGltZz4iLCB7IHNyYzogdXJsIH0pKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGVsc2Ugew0KICAgICAgICAgICAgICAgIGNvbnRlbnQuZW1wdHkoKS5hcHBlbmQoJCgiPGlmcmFtZSA+IiwgeyBzcmM6IHVybCwgc3R5bGU6ICJ3aWR0aDogMTAwJTsgaGVpZ2h0OiAxMDAlIiB9KSk7DQogICAgICAgICAgICB9DQogICAgICAgICAgICBjb250ZW50LmNzcyhvdmVybGF5U2l6ZSk7DQogICAgICAgICAgICBzaG93T3ZlcmxheShvdmVybGF5KTsNCiAgICAgICAgfQ0KDQogICAgfTsNCg0KICAgIGZ1bmN0aW9uIHByZVNob3dPdmVybGF5KG92ZXJsYXksIG92ZXJsYXlDb250ZW50KSB7DQogICAgICAgIG92ZXJsYXkuY3NzKHsNCiAgICAgICAgICAgICJvcGFjaXR5IjogMQ0KICAgICAgICB9KS5zaG93KCk7DQogICAgfQ0KDQogICAgZnVuY3Rpb24gc2hvd092ZXJsYXkob3ZlcmxheSkgew0KICAgICAgICB2YXIgaSxxLGxpbmtzLGNsb3NlLGNvbnRlbnQ7DQogICAgICAgIG92ZXJsYXkuc2hvdygpLmFuaW1hdGUoew0KICAgICAgICAgICAgb3BhY2l0eTogMQ0KICAgICAgICB9KTsNCg0KICAgICAgICBjbG9zZSA9IG92ZXJsYXkuZmluZCgiLm92ZXJsYXktY2xvc2UtbGluayIpOw0KICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7Y2xvc2UuZm9jdXMoKTt9LDApOw0KICAgICAgICBsaW5rcyA9IG92ZXJsYXkuZmluZCgiYTpub3QoLm92ZXJsYXktY2xvc2UtbGluaykiKTsNCiAgICAgICAgaSA9IDI7DQogICAgICAgIGZvcihxPTA7cTxsaW5rcy5sZW5ndGg7cSsrKXsNCiAgICAgICAgICAgICQobGlua3NbcV0pLmF0dHIoInRhYkluZGV4IixpKyspOw0KICAgICAgICB9DQogICAgICAgIGNvbnRlbnQgPSBvdmVybGF5LmZpbmQoIi5vdmVybGF5LWlubmVyIik7DQogICAgICAgIGNvbnRlbnQuYXR0cigidGFiSW5kZXgiLGkpOw0KICAgICAgICBjb250ZW50LmJsdXIoZnVuY3Rpb24oYXJncyl7DQogICAgICAgICAgICBhcmdzLnByZXZlbnREZWZhdWx0KCk7DQogICAgICAgICAgICBhcmdzLnN0b3BQcm9wYWdhdGlvbigpOw0KICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpe2Nsb3NlLmZvY3VzKCl9LDApOw0KICAgICAgICB9KTsNCg0KICAgICAgICBDb2duaWZpZGUuVHJhY2tpbmcudHJhY2soDQogICAgICAgICAgICBDb2duaWZpZGUuRG9tYWluLlRyYWNraW5nVHlwZXMoKS5ldmVudCwNCiAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICBjYXRlZ29yeTogIk92ZXJsYXkiLA0KICAgICAgICAgICAgICAgIGV2ZW50OiAib3BlbiIsDQogICAgICAgICAgICAgICAgbGFiZWw6IGxhYmVsLA0KICAgICAgICAgICAgICAgIGRhdGE6IDANCiAgICAgICAgICAgIH0sDQogICAgICAgICAgICAic3luYyINCiAgICAgICAgKTsNCiAgICAgICAgcmV0dXJuIG92ZXJsYXk7DQogICAgfTsNCg0KICAgIGZ1bmN0aW9uIGhpZGVPdmVybGF5KG92ZXJsYXkpIHsNCiAgICAgICAgdmFyIGNvbnRlbnQgPSBvdmVybGF5LmZpbmQoIi5vdmVybGF5LWlubmVyIik7DQoNCiAgICAgICAgb3ZlcmxheS5hbmltYXRlKA0KICAgICAgICAgICAgeyBvcGFjaXR5OiAwIH0sDQogICAgICAgICAgICBmdW5jdGlvbiAoKSB7DQogICAgICAgICAgICAgICAgb3ZlcmxheS5oaWRlKCk7DQogICAgICAgICAgICAgICAgY29udGVudC5lbXB0eSgpOw0KDQogICAgICAgICAgICAgICAgaWYgKG1lanMpIHsNCiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgcCBpbiBtZWpzLnBsYXllcnMpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGlmICgkKCIjIiArIG1lanMucGxheWVyc1twXS5pZCkucGFyZW50cygiLm92ZXJsYXkiKS5sZW5ndGggPT0gMSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICQoIiMiICsgbWVqcy5wbGF5ZXJzW3BdLmlkICsgJyB2aWRlbycpLmF0dHIoJ3NyYycsICcnKTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZWpzLnBsYXllcnNbcF0ucmVtb3ZlKCk7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVqcy5wbGF5ZXJzLnNwbGljZShwLCAxKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0NCiAgICAgICAgKTsNCg0KICAgICAgICBDb2duaWZpZGUuVHJhY2tpbmcudHJhY2soDQogICAgICAgICAgICBDb2duaWZpZGUuRG9tYWluLlRyYWNraW5nVHlwZXMoKS5ldmVudCwNCiAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICBjYXRlZ29yeTogIk92ZXJsYXkiLA0KICAgICAgICAgICAgICAgIGV2ZW50OiAiY2xvc2UiLA0KICAgICAgICAgICAgICAgIGxhYmVsOiBsYWJlbCwNCiAgICAgICAgICAgICAgICBkYXRhOiAwDQogICAgICAgICAgICB9LA0KICAgICAgICAgICAgInN5bmMiDQogICAgICAgICk7DQogICAgICAgIHJldHVybiBvdmVybGF5Ow0KICAgIH07DQoNCiAgICBmdW5jdGlvbiBjcmVhdGVPdmVybGF5KCkgew0KICAgICAgICB2YXIgb3ZlcmxheSA9ICI8ZGl2IGNsYXNzPSdvdmVybGF5LXdyYXBwZXInPiIgKw0KICAgICAgICAgICAgICAgICAgICAgICAgIjxkaXYgY2xhc3M9J292ZXJsYXkgY29tcG9uZW50Jz4iICsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAiPGRpdiBjbGFzcz0nY29tcG9uZW50LWNvbnRlbnQnPiIgKw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiPGRpdiBjbGFzcz0nb3ZlcmxheS1jbG9zZSc+PGEgdGFiSW5kZXg9JzEnIGNsYXNzPSdvdmVybGF5LWNsb3NlLWxpbmsnIGhyZWY9JyMnPsOXPC9hPjwvZGl2PiIgKw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiPGRpdiBjbGFzcz0nb3ZlcmxheS1pbm5lcicgdGFiSW5kZXg9JzInPjwvZGl2PiIgKw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICI8L2Rpdj4iICsNCiAgICAgICAgICAgICAgICAgICAgICAgICAiPC9kaXY+IisNCiAgICAgICAgICAgICAgICAgICAgICAgICI8L2Rpdj4iOw0KDQogICAgICAgICQoImJvZHkiKS5hcHBlbmQob3ZlcmxheSk7DQogICAgfQ0KDQogICAgYXBpLmluaXQgPSBmdW5jdGlvbiAoKSB7DQogICAgICAgIGlmKCFvdmVybGF5UGxhY2Vob2xkZXIpew0KICAgICAgICAgICAgY3JlYXRlT3ZlcmxheSgpOw0KICAgICAgICB9DQoNCiAgICAgICAgaWYgKGlzT3ZlcmxheVBhZ2UoKSkgew0KICAgICAgICAgICAgdmFyIHBhZ2UgPSAkKCIub3ZlcmxheS1wYWdlIiksDQogICAgICAgICAgICAgICAgb3ZlcmxheSA9ICQoIiNzcG5PdmVybGF5IiksDQogICAgICAgICAgICAgICAgb3ZlcmxheUNvbnRlbnQgPSBwYWdlLmNoaWxkcmVuKCIuY29tcG9uZW50LWNvbnRlbnQiKSwNCiAgICAgICAgICAgICAgICBjb250ZW50ID0gb3ZlcmxheUNvbnRlbnQuY2hpbGRyZW4oIi5vdmVybGF5LWlubmVyIik7DQogICAgICAgICAgICANCiAgICAgICAgICAgIHJlc2l6ZU92ZXJsYXkoY29udGVudCwgb3ZlcmxheUNvbnRlbnQsIHsNCiAgICAgICAgICAgICAgICB3aWR0aDogb3ZlcmxheS5kYXRhKCJ3aWR0aCIpLA0KICAgICAgICAgICAgICAgIGhlaWdodDogb3ZlcmxheS5kYXRhKCJoZWlnaHQiKSwNCiAgICAgICAgICAgICAgICBwZXJjZW50OiBvdmVybGF5LmRhdGEoInBlcmNlbnQiKQ0KICAgICAgICAgICAgfSk7DQogICAgICAgICAgICBvdmVybGF5Q29udGVudC5vbigiY2xpY2siLCBmdW5jdGlvbihldmVudCl7DQogICAgICAgICAgICAgICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpOw0KICAgICAgICAgICAgfSk7DQogICAgICAgICAgICBwYWdlLm9uKCJjbGljayIsIGZ1bmN0aW9uIChldmVudCkgew0KICAgICAgICAgICAgICAgIGlmIChpc1ByZXZpZXdNb2RlKCkpIHsNCiAgICAgICAgICAgICAgICAgICAgbG9jYXRpb24gPSBsb2NhdGlvbi5ocmVmLnJlcGxhY2UoInNjX21vZGU9cHJldmlldyIsInNjX21vZGU9ZWRpdCIpDQogICAgICAgICAgICAgICAgfSAgICAgICAgICAgICANCiAgICAgICAgICAgIH0pOyAgICAgDQogICAgICAgIH0NCg0KICAgICAgICB2YXIgb3ZlcmxheSA9ICQoIi5vdmVybGF5LXdyYXBwZXIgPiAub3ZlcmxheSIpLA0KICAgICAgICAgICAgb3ZlcmxheUNvbnRlbnQgPSBvdmVybGF5LmZpbmQoIi5jb21wb25lbnQtY29udGVudCIpLA0KICAgICAgICAgICAgb3ZlcmxheUNsb3NlID0gb3ZlcmxheS5maW5kKCIub3ZlcmxheS1jbG9zZSIpLA0KICAgICAgICAgICAgb3ZlcmxheVNvdXJjZSA9ICQoIi5vdmVybGF5LXNvdXJjZSBhOm5vdCguaW5pdGlhbGl6ZWQpLCBhLm92ZXJsYXktc291cmNlOm5vdCguaW5pdGlhbGl6ZWQpIiksDQogICAgICAgICAgICBvdmVybGF5SW5uZXIgPSAkKCIub3ZlcmxheS1pbm5lciIpLA0KICAgICAgICAgICAgb3ZlcmxheUNsb3NlTGluayA9IG92ZXJsYXkuZmluZCgiLm92ZXJsYXktY2xvc2UtbGluayIpLA0KICAgICAgICAgICAgY2xvc2VBY3Rpb24sDQogICAgICAgICAgICBvdmVybGF5Q2xpY2tTb3VyY2U7DQoNCiAgICAgICAgY2xvc2VBY3Rpb24gPSBmdW5jdGlvbigpew0KICAgICAgICAgICAgaGlkZU92ZXJsYXkob3ZlcmxheSk7DQogICAgICAgICAgICBvdmVybGF5SW5uZXIub2ZmKCJibHVyIik7DQogICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7DQogICAgICAgICAgICAgICAgaWYob3ZlcmxheUNsaWNrU291cmNlICE9IG51bGwpew0KICAgICAgICAgICAgICAgICAgICBvdmVybGF5Q2xpY2tTb3VyY2UuZm9jdXMoKTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9LDApOw0KICAgICAgICB9Ow0KDQogICAgICAgIGlmKCFvdmVybGF5UGxhY2Vob2xkZXIpew0KICAgICAgICAgICAgb3ZlcmxheUNvbnRlbnQub24oImNsaWNrIiwgZnVuY3Rpb24oZXZlbnQpew0KICAgICAgICAgICAgICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpOw0KICAgICAgICAgICAgfSk7DQoNCiAgICAgICAgICAgIG92ZXJsYXkub24oImNsaWNrIiwgZnVuY3Rpb24gKGV2ZW50KSB7DQogICAgICAgICAgICAgICAgY2xvc2VBY3Rpb24oKTsNCiAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgDQogICAgICAgICAgICAkKCJib2R5Iikua2V5dXAoZnVuY3Rpb24oYXJncyl7DQogICAgICAgICAgICAgICAgYXJncy5zdG9wUHJvcGFnYXRpb24oKTsNCiAgICAgICAgICAgICAgICBpZihhcmdzLndoaWNoID09IDI3KXsNCiAgICAgICAgICAgICAgICAgICAgY2xvc2VBY3Rpb24oKTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9KTsNCg0KICAgICAgICAgICAgb3ZlcmxheUNsb3NlTGluay5vbigiY2xpY2siLCBmdW5jdGlvbihhcmdzKXsNCiAgICAgICAgICAgICAgICBhcmdzLnByZXZlbnREZWZhdWx0KCk7DQogICAgICAgICAgICAgICAgY2xvc2VBY3Rpb24oKTsNCiAgICAgICAgICAgIH0pOw0KDQogICAgICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigicmVzaXplIiwgZnVuY3Rpb24oKXsNCiAgICAgICAgICAgICAgICB2YXIgaGVpZ2h0ID0gJCh3aW5kb3cpLmhlaWdodCgpOw0KICAgICAgICAgICAgICAgIGhlaWdodCA9IGhlaWdodCAtIG1hcmdpblRvcCAtIDAuMSAqIGhlaWdodDsNCiAgICAgICAgICAgICAgICBvdmVybGF5Q29udGVudC5jc3MoIm1heC1oZWlnaHQiLCBoZWlnaHQgKyAicHgiKTsNCiAgICAgICAgICAgIH0pOw0KDQogICAgICAgICAgICBvdmVybGF5UGxhY2Vob2xkZXIgPSB0cnVlOw0KICAgICAgICB9DQoNCg0KICAgICAgICBvdmVybGF5U291cmNlLmVhY2goZnVuY3Rpb24oKXsNCiAgICAgICAgICAgIGlmIChpc0VkaXRNb2RlKCkpIHsNCiAgICAgICAgICAgICAgICByZXR1cm47DQogICAgICAgICAgICB9DQoNCiAgICAgICAgICAgICQodGhpcykub24oImNsaWNrIiwgZnVuY3Rpb24gKGV2ZW50KSB7DQogICAgICAgICAgICAgICAgb3ZlcmxheUNsaWNrU291cmNlID0gZXZlbnQuY3VycmVudFRhcmdldDsNCiAgICAgICAgICAgICAgICBpZiAoIWlzRWRpdE1vZGUoKSkgew0KICAgICAgICAgICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpOw0KICAgICAgICAgICAgICAgICAgICBwcmVTaG93T3ZlcmxheShvdmVybGF5LCBvdmVybGF5Q29udGVudCk7DQoNCiAgICAgICAgICAgICAgICAgICAgdmFyIHVyaSA9IHRoaXMuaHJlZjsNCiAgICAgICAgICAgICAgICAgICAgbG9hZE92ZXJsYXkodXJpLCBvdmVybGF5KTsNCg0KICAgICAgICAgICAgICAgICAgICB2YXIgaHJlZiA9IHRoaXMuaHJlZi5zcGxpdCgnLycpOw0KICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8PSBocmVmLmxlbmd0aDsgaSsrKSB7DQogICAgICAgICAgICAgICAgICAgICAgICBsYWJlbCA9IGhyZWYucG9wKCk7DQogICAgICAgICAgICAgICAgICAgICAgICBpZiAobGFiZWwubGVuZ3RoID09IDApDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7DQogICAgICAgICAgICAgICAgICAgICAgICBicmVhazsNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0pOw0KDQogICAgICAgICAgICAkKHRoaXMpLmZvY3VzKGZ1bmN0aW9uKGFyZ3Mpew0KICAgICAgICAgICAgICAgIGFyZ3MucHJldmVudERlZmF1bHQoKTsNCiAgICAgICAgICAgICAgICBpZihhcmdzLmN1cnJlbnRUYXJnZXQgPT09IG92ZXJsYXlDbGlja1NvdXJjZSl7DQogICAgICAgICAgICAgICAgICAgIG92ZXJsYXlDbGlja1NvdXJjZSA9IG51bGw7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfSk7DQoNCiAgICAgICAgICAgICQodGhpcykuYWRkQ2xhc3MoImluaXRpYWxpemVkIik7DQogICAgICAgIH0pOw0KDQoNCiAgICB9Ow0KDQogICAgcmV0dXJuIGFwaTsNCg0KfSAoalF1ZXJ5KTsNCg0KWEEucmVnaXN0ZXIoIm92ZXJsYXkiLCBYQS5jb21wb25lbnQub3ZlcmxheSk7DQoNCg0KICAgIA0K
- ID: "6954b7c7-2487-423f-8600-436cb3b6dc0e"
  Hint: Size
  Value: 11523
- ID: "6f47a0a5-9c94-4b48-abeb-42d38def6054"
  Hint: Mime Type
  Value: "application/x-javascript"
- ID: "c06867fe-9a43-4c7d-b739-48780492d06f"
  Hint: Extension
  Value: js
Languages:
- Language: en
  Versions:
  - Version: 1
    Fields:
    - ID: "25bed78c-4957-4165-998a-ca1b52f67497"
      Hint: __Created
      Value: 20170331T161345Z
    - ID: "5dd74568-4d4b-44c1-b513-0af5f4cda34f"
      Hint: __Created by
      Value: sitecore\Admin
